syntax = "proto3";

option java_multiple_files = true;
package ds.coursework.grpc.generated;

service WalletService {
  rpc CreateAccount (CreateAccountRequest) returns (CreateAccountResponse);
  rpc GetBalance (BalanceRequest) returns (BalanceResponse);
  rpc TransferFund (TransferRequest) returns (TransferResponse);

  // NEW: Allow servers to deposit money into each other
  rpc Deposit (DepositRequest) returns (DepositResponse);
}

message CreateAccountRequest {
  string userId = 1;
  double initialBalance = 2;
}

message CreateAccountResponse {
  string accountId = 1;
  string assignedShardId = 2;
  bool success = 3;
  string errorMessage = 4;
}

message BalanceRequest {
  string accountId = 1;
}

message BalanceResponse {
  double balance = 1;
}

message TransferRequest {
  string fromAccountId = 1;
  string toAccountId = 2;
  double amount = 3;
}

message TransferResponse {
  bool success = 1;
  string transactionId = 2;
  string errorMessage = 3;
}

message DepositRequest {
  string accountId = 1;
  double amount = 2;
}

message DepositResponse {
  bool success = 1;
  string errorMessage = 2;
}